DynamicHeader = (function() {
    var o = this;
    var e, m;
    var u, t, v;
    var p;
    var A = "0.2s ease-in-out";

    function i() {
        return window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight
    }

    function j() {
        return Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight)
    }

    function r() {
        return u.clientHeight
    }

    function q() {
        var B = parseInt(u.style.top);
        return B < 0
    }

    function f() {
        p = {};
        p.transition = u.style.transition;
        p.position = u.style.position;
        p.left = u.style.left;
        p.top = u.style.top;
        p.right = u.style.right;
        u.style.transition = A;
        u.style.position = "fixed";
        u.style.top = "0";
        u.style.left = "0";
        u.style.right = "0"
    }

    function a() {
        if (u && p) {
            u.style.transition = p.transition;
            u.style.position = p.position;
            u.style.left = p.left;
            u.style.top = p.top;
            u.style.right = p.right
        }
    }

    function d() {
        if (config.headerId) {
            u = document.getElementById(config.headerId)
        }
        if (!u) {
            u = document.getElementsByTagName("header")[0];
            if (!u) {
                console.error("Header with either id=[" + config.headerId + "] or tag=<header> could not be found in DOM");
                return
            }
        }
        f();
        return u
    }

    function g() {
        t = document.body.firstElementChild
    }

    function b(B) {
        v.style.height = B
    }

    function x(B) {
        u.style.top = B
    }

    function c() {
        if (v) {
            var B = r();
            b(B + "px")
        }
    }

    function h() {
        if (!o.config.overlay && u && t && !v) {
            var B = t.parentElement;
            v = document.createElement("div");
            v.id = "dynamicHeaderTrim";
            B.insertBefore(v, t);
            c()
        } else {
            if (v) {
                v.remove()
            }
            v = null
        }
    }

    function l() {
        x(0);
        c()
    }

    function n() {
        console.log(JSON.stringify(o.config));
        if (!o.config.fix) {
            var C = document.body.scrollTop || document.documentElement.scrollTop;
            if (Math.abs(m - C) <= o.config.delta) {
                return
            }
            var B = r();
            if (C > m && C > B) {
                x(-B + "px")
            } else {
                if (C + i() < j()) {
                    x(0)
                }
            }
            m = C
        }
    }

    function s() {
        l()
    }

    function z() {
        e = true
    }

    function k() {
        window.removeEventListener("resize", s);
        window.removeEventListener("scroll", z);
        window.removeEventListener("load", y);
        o.config = {
            delta: 5,
            headerId: "header",
            fix: false
        };
        m = 0;
        e = false;
        a();
        if (v) {
            v.remove()
        }
        v = null;
        u = null;
        t = null
    }

    function w(B) {
        if (B) {
            if (B.headerId) {
                o.config.headerId = B.headerId
            }
            if (B.delta) {
                o.config.delta = B.delta
            }
            if (B.fix) {
                o.config.fix = B.fix
            }
        }
    }

    function y() {
        d();
        if (u) {
            g();
            h();
            window.addEventListener("resize", s);
            window.addEventListener("scroll", z);
            setInterval(function() {
                if (e) {
                    e = false;
                    n()
                }
            }, 250)
        }
    }
    return {
        init: function(B) {
            k();
            w(B);
            if (document.readyState == "complete") {
                y()
            } else {
                window.addEventListener("load", y)
            }
        },
        destroy: function() {
            k()
        }
    }
})();