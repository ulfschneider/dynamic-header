var DynamicHeader=(function(){var h=this;var q,x;var e,i,b;var t;var f;var G;var s;var I="0.2s ease-in-out";function H(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function j(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}function m(){return e.clientHeight}function D(){var K=parseInt(e.style.top);return K<0}function k(){t={};t.transition=e.style.transition;t.position=e.style.position;t.left=e.style.left;t.top=e.style.top;t.right=e.style.right;e.style.transition=I;e.style.position="fixed";e.style.top="0";e.style.left="0";e.style.right="0"}function n(){if(e&&t){e.style.transition=t.transition;e.style.position=t.position;e.style.left=t.left;e.style.top=t.top;e.style.right=t.right}}function g(){e=document.getElementById(h.config.headerId);if(!e){console.error("Header with id=["+h.config.headerId+"] could not be found in DOM")}else{k()}}function u(){i=document.body.firstElementChild}function v(K){b.style.height=K}function w(K){e.style.top=K}function A(){if(b){var K=m();v(K+"px")}}function F(){if(!h.config.overlay&&e&&i&&!b){var K=i.parentElement;b=document.createElement("div");b.id="dynamicHeaderTrim";K.insertBefore(b,i);A()}else{if(b){b.remove()}b=null}}function z(){if(e){if(D()){var K=m();w(-2*K+"px")}}}function c(){var L=document.body.scrollTop||document.documentElement.scrollTop;if(Math.abs(x-L)<=h.config.delta){return}var K=m();if(L>x&&L>K){w(-K+"px")}else{if(L+H()<j()){w(0)}}x=L}function l(){z();A()}function C(){q=true}function p(){h.config={delta:5,headerId:"header",};x=0;q=false;n();if(b){b.remove()}b=null;e=null;i=null}function r(K){if(K){if(K.headerId){h.config.headerId=K.headerId}if(K.overlay){h.config.overlay=K.overlay}if(K.pickBackgroundFromImgId){h.config.pickBackgroundFromImgId=K.pickBackgroundFromImgId;B()}if(K.lightColor){h.config.lightColor=K.lightColor}if(K.darkColor){h.config.darkColor=K.darkColor}if(K.opacity){h.config.opacity=K.opacity}if(K.delta){h.config.delta=K.delta}}}function y(){return(s[0]*299+s[1]*587+s[2]*114)/1000}function d(){return y()<128}function E(){return d()}function o(){if(h.config.pickBackgroundFromImgId){var K=document.getElementById(h.config.pickBackgroundFromImgId);if(!K||!K.src){console.error("Image with id=["+h.config.pickBackgroundFromImgId+"] could not be found in DOM")}else{if(K.src){var L=new Image();L.src=K.src;L.onload=function(){s=G.getColor(L);e.style.background="rgb("+s.join(",")+")";if(d()&&h.config.lightColor){e.style.color=h.config.lightColor}else{if(E()&&h.config.darkColor){e.style.color=h.config.darkColor}}if(h.config.opacity){e.style.background="rgb("+s.join(",")+","+h.config.opacity+")"}}}}}}function a(){G=new ColorThief()}function B(){if(!G){f=document.createElement("script");f.type="text/javascript";f.src="color-thief.min.js";f.onload=a;document.getElementsByTagName("head")[0].appendChild(f)}}function J(){g();o();if(e){u();F();window.addEventListener("resize",l);window.addEventListener("scroll",C);setInterval(function(){if(q){q=false;c()}},250)}}return{init:function(K){p();r(K);window.addEventListener("load",J)},destroy:function(){p()}}})();